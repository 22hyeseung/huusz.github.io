<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="마우스 누르는 게 세상에서 제일 귀찮은 휴지의 개발블로그">
  <meta name="keyword" content="huusz, frontend">
  
    <link rel="shortcut icon" href="/css/images/logo.png">
  
  <title>
    
      [node]  세션 Session | 휴지 개발 블로그
    
  </title>
  <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdn.bootcss.com/highlight.js/9.12.0/styles/tomorrow.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/plugins/gitment.css">
  <script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdn.bootcss.com/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js"></script>
  <script src="/js/qrious.js"></script>
<script src="/js/gitment.js"></script>
</head>
<div class="wechat-share">
  <img src="/css/images/logo.png" />
</div>

  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>휴지 개발 블로그</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">Home</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">Archives</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">About</a>
          
        </li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">Home</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">Archives</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">About</a>
            
          </li>
        
      </ul>
    </div>
  </div>
</header>

    <div id="article-banner">
  <h2>[node]  세션 Session</h2>
  <p class="post-date">2017-09-09</p>
  <div class="arrow-down">
    <a href="javascript:;"></a>
  </div>
</div>
<main class="app-body flex-box">
  <!-- Article START -->
  <article class="post-article">
    <section class="markdown-content"><p><img src="http://allvectorlogo.com/img/2016/05/node-js-logo.png" alt=""></p>
<h1 id="세션-Session"><a href="#세션-Session" class="headerlink" title="세션 Session"></a>세션 Session</h1><h3 id="세션의-의미"><a href="#세션의-의미" class="headerlink" title="세션의 의미"></a>세션의 의미</h3><p><strong>사전적 의미</strong><br>1) (특정한 활동을 위한) 시간<br>2) (의회 등의) 회기; (법정의) 개정 (기간)</p>
<p><strong>실질적 의미</strong><br>1) 시작 조건과 종료 조건이 있는 시간, 또는 회기<br>2) 정보 교환이 지속되는 시간, 또는 회기</p>
<h3 id="세션의-예"><a href="#세션의-예" class="headerlink" title="세션의 예"></a>세션의 예</h3><p><strong>HTTP session</strong>: 요청 - 응답</p>
<p><strong>로그인 세션</strong>: 로그인 - 로그아웃</p>
<p><strong>Google Analytics 세션</strong>:<br>페이지 접속 - 30분간 접속이 없으면 종료로 간주 (커스터마이징 가능)  </p>
<h2 id="웹-서비스를-위한-세션의-구현"><a href="#웹-서비스를-위한-세션의-구현" class="headerlink" title="웹 서비스를 위한 세션의 구현"></a>웹 서비스를 위한 세션의 구현</h2><ol>
<li>세션이 시작되면(ex. 로그인하면), 세션이 시작되었다는 사실을 쿠키에 저장</li>
<li>세션에 대한 정보를 여러 요청에 걸쳐서 지속시키기 위해, 정보를 어딘가에 저장</li>
<li>세션이 만료되면(ex. 로그아웃하면), 세션이 만료되었다는 사실을 쿠키에 반영  </li>
</ol>
<p><sub> * 위 방식은 널리 사용되는 방식일 뿐, 반드시 위와 같이 구현해야 하는 것은 아니다.</sub></p>
<hr>
<p>만약, 브라우저가 갑자기 꺼지면 쿠키는 어떻게 되는가?  </p>
<p><strong>세션쿠키</strong>라는 것이 있다. 브라우저가 꺼지면 쿠키가 삭제되는 옵션이다. 이 옵션이 정의되어있다면 브라우저가 꺼지는 순간 쿠키가 삭제된다.하지만 지속시간이 긴 쿠키라면(직접 정의할 수 있다.) 브라우저를 껐다가 켜도 쿠키가 지속된다. </p>
<hr>
<h2 id="세션-스토어"><a href="#세션-스토어" class="headerlink" title="세션 스토어"></a>세션 스토어</h2><p>세션에 대한 정보를 저장하는 어딘가</p>
<ul>
<li>쿠키</li>
<li>데이터베이스</li>
<li>파일</li>
<li>기타 정보를 저장할 수 있는 곳 어디든</li>
</ul>
<h3 id="세션-스토어의-선택"><a href="#세션-스토어의-선택" class="headerlink" title="세션 스토어의 선택"></a>세션 스토어의 선택</h3><p>서비스의 요구사항에 맞춰서 적절한 저장소를 선택하면 된다.</p>
<ul>
<li><p>쿠키: 정보의 형태가 간단하고 자주 바뀔 일이 없다면</p>
</li>
<li><p>데이터베이스: 저장해야 할 정보의 양이 많다면</p>
</li>
<li><p>메모리 기반 저장소: 정보가 굉장히 자주 변경된다면</p>
</li>
</ul>
<h2 id="세션-세션-스토어"><a href="#세션-세션-스토어" class="headerlink" title="세션? 세션 스토어?"></a>세션? 세션 스토어?</h2><p>‘세션’과 ‘세션 스토어’는 혼용되는 경우가 많지만 엄연히 다른 말이다.</p>
<p>‘세션에 정보를 저장한다’는 말은 ‘세션 스토어에 정보를 저장한다’는 말과 같은 의미이다.   </p>
<h2 id="Express-Session"><a href="#Express-Session" class="headerlink" title="Express + Session"></a>Express + Session</h2><p><strong>cookie-session</strong></p>
<p>  쿠키에 모든 정보를 저장하는 세션 스토어. 첫 방문시 무조건 세션 시작.</p>
<p><strong>express-session</strong></p>
<p>  쿠키에는 세션 식별자만 저장하고 실제 정보의 저장은 외부 저장소(데이터베이스 등)를 이용하는 세션 스토어. 외부 저장소에 대한 별도의 설정 필요</p>
<h2 id="익스프레스-세션-예제"><a href="#익스프레스-세션-예제" class="headerlink" title="익스프레스 세션 예제"></a>익스프레스 세션 예제</h2><p><a href="https://glitch.com/edit/#!/laser-teal?path=README.md:1:0" target="_blank" rel="external">link</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// server.js</span></div><div class="line"></div><div class="line"><span class="comment">// cookie-session 설정</span></div><div class="line"><span class="comment">// name: 쿠키 이름으로 사용할 문자열</span></div><div class="line"><span class="comment">// secret: 세션 정보를 서명할 때 사용할 키</span></div><div class="line"><span class="comment">// secret은 비밀 정보. 공개되어서는 안 된다.</span></div><div class="line">app.use(cookieSession(&#123;</div><div class="line">  name: <span class="string">'session'</span>,</div><div class="line">  secret: process.env.SECRET</div><div class="line">&#125;))</div><div class="line"></div><div class="line"><span class="comment">// req.session.count를 처리하는 미들웨어</span></div><div class="line"><span class="keyword">const</span> countMiddleware = <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">if</span> (<span class="string">'count'</span> <span class="keyword">in</span> req.session) &#123;</div><div class="line">    <span class="comment">// count 속성이 있으면 1으.</span></div><div class="line">    req.session.count += <span class="number">1</span></div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="comment">// count 속성이 없으면 처음 방문한 것이므로 1로 설정한다.</span></div><div class="line">    req.session.count = <span class="number">1</span></div><div class="line">  &#125;</div><div class="line">  next()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 첫 방문 후, 쿠키 관련 헤더가 요청과 응답에 잘 포함되는지 살펴보고,</span></div><div class="line"><span class="comment">// 실제로 쿠키가 어떻게 저장되어있는지 살펴보세요.</span></div><div class="line">app.get(<span class="string">'/'</span>, countMiddleware, (req, res) =&gt; &#123;</div><div class="line">  res.render(<span class="string">'index.ejs'</span>, &#123;<span class="attr">count</span>: req.session.count&#125;)</div><div class="line">&#125;)</div><div class="line"></div><div class="line">app.post(<span class="string">'/reset-count'</span>, (req, res) =&gt; &#123;</div><div class="line">  <span class="keyword">delete</span> req.session.count</div><div class="line">  res.redirect(<span class="string">'/'</span>)</div><div class="line">&#125;)</div><div class="line"></div><div class="line">app.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'listening...'</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// index. ejs</span></div><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">  &lt;head&gt;</div><div class="line">  &lt;<span class="regexp">/head&gt;</span></div><div class="line"><span class="regexp">  &lt;body&gt;</span></div><div class="line"><span class="regexp">    &lt;div&gt;</span></div><div class="line"><span class="regexp">      &lt;%= count %&gt;번 째 방문하셨습니다.</span></div><div class="line"><span class="regexp">    &lt;/</span>div&gt;</div><div class="line">    &lt;form action=<span class="string">"/reset-count"</span> method=<span class="string">"post"</span>&gt;</div><div class="line">      &lt;button type=<span class="string">"submit"</span>&gt;</div><div class="line">        초기화</div><div class="line">      &lt;<span class="regexp">/button&gt;</span></div><div class="line"><span class="regexp">    &lt;/</span>form&gt;</div><div class="line">  &lt;<span class="regexp">/body&gt;</span></div><div class="line"><span class="regexp">&lt;/</span>html&gt;</div></pre></td></tr></table></figure>
<h2 id="인증-인가-예제"><a href="#인증-인가-예제" class="headerlink" title="인증/인가 예제"></a>인증/인가 예제</h2><p><a href="https://glitch.com/edit/#!/brave-picture?path=README.md:1:0" target="_blank" rel="external">link</a></p>
<p><strong>인증(Authentication)과 인가(Authorization)</strong></p>
<p>인증(Authentication)은 클라이언트가 누구인지를 확인하는 과정이다. 지금은 ‘인증과 로그인은 같은 말’이라고 생각하셔도 무방하다.</p>
<p>인가(=허가)는 클라이언트가 하려고 하는 작업이 해당 클라이언트에게 허가된 작업인지를 확인하는 과정이다. ‘권한 설정’이라고 생각하셔도 무방하다. 예를 들어 다음 카페나 네이버 클럽에서는 관리자만이 게시판을 만들거나 없앨 수 있도록 인가된다.</p>
<p><br></p>
<p><strong>인증 구현 전략</strong></p>
<p>인증은 여러가지 방식으로 구현될 수 있으며, 여기에서는 우리가 쓰고 있는 cookie-session 의 기능에 맞추어서 구현해보도록 한다.</p>
<p>cookie-session이 제공하는 미들웨어는 첫 방문시 바로 세션을 시작하고 (이를 guest session이라 부릅니다) 쿠키에 빈 세션 정보(빈 객체)를 저장한다. 그래서 첫 방문자에 대해서도 session 객체를 바로 쓸 수 있다.</p>
<p>아래와 같은 규칙으로 인증을 구현해보도록 한다.</p>
<ol>
<li><p><code>req.session.username === undefined</code>이면 로그인된 사용자가 없는 것으로 간주한다.</p>
</li>
<li><p>사용자가 로그인 폼을 전송하면 accounts 배열에 저장된 계정 정보 중에 일치하는 것이 있는지 확인하고, 있다면 <code>req.session.username</code>에 해당 사용자 이름을 저장한다. 만약 일치하는 계정이 없으면 <code>400 Bad Request</code> 응답을 보낸다.</p>
</li>
<li><p><code>req.session.username</code>에 저장된 값이 있다면 해당 사용자로 로그인이 되어 있다고 간주한다.</p>
</li>
<li><p>로그아웃을 하기 위해 <code>req.session = null</code>와 같이 대입해서 세션을 초기화한다.</p>
</li>
</ol>
<p>(인증이 된 뒤에는 <code>req.user</code>와 <code>res.locals.user</code>에 계정 객체를 주입해서 라우트 핸들러와 템플릿에서 편하게 접근할 수 있도록 미리 코드를 짜 두었다.)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// sever.js - account</span></div><div class="line"><span class="keyword">const</span> accounts = [</div><div class="line">  &#123;</div><div class="line">    username: <span class="string">'seungha'</span>,</div><div class="line">    password: <span class="string">'kim'</span>,</div><div class="line">    name: <span class="string">'김승하'</span></div><div class="line">  &#125;,</div><div class="line">  &#123;</div><div class="line">    username: <span class="string">'fast'</span>,</div><div class="line">    password: <span class="string">'campus'</span>,</div><div class="line">    name: <span class="string">'패스트캠퍼스'</span>,</div><div class="line">    admin: <span class="literal">true</span></div><div class="line">  &#125;</div><div class="line">]</div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//server.js - login</span></div><div class="line">app.post(<span class="string">'/login'</span>, urlencodedMiddleware, (req, res) =&gt; &#123;</div><div class="line">  </div><div class="line">  <span class="comment">// 인증 과정을 작성해주세요.</span></div><div class="line">  <span class="keyword">if</span>(accounts.find( <span class="function"><span class="params">acc</span> =&gt;</span> acc.username === req.body.username &amp;&amp; acc.password === req.body.password))&#123;</div><div class="line">    req.session.username = req.body.username;</div><div class="line">    </div><div class="line">    res.redirect(<span class="string">'/'</span>);</div><div class="line">    </div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    res.status(<span class="number">404</span>);</div><div class="line">    res.send(<span class="string">'404 Not Found'</span>);</div><div class="line">  &#125;</div><div class="line">  res.redirect(<span class="string">'/'</span>);</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//server.js - logout</span></div><div class="line">app.post(<span class="string">'/logout'</span>, urlencodedMiddleware, (req, res) =&gt; &#123;</div><div class="line">  <span class="comment">// 세션 초기화</span></div><div class="line">  req.session = <span class="literal">null</span></div><div class="line">  res.redirect(<span class="string">'/'</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p><br></p>
<p><strong>인가 구현 전략</strong></p>
<p>관리자만이 비밀 정보(/secret)에 접근할 수 있도록 한다. 사용자가 관리자인지 아닌지의 여부는 계정 객체의 admin 속성에 저장되어 있다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// server.js - admin</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">onlyAdminMiddleware</span>(<span class="params">req, res, next</span>) </span>&#123;</div><div class="line">  <span class="comment">// `/secret`에 접속했을 때 이 미들웨어가 작동합니다.</span></div><div class="line">  <span class="keyword">const</span> user = req.session.username;</div><div class="line">  <span class="keyword">if</span>(accounts.find( <span class="function"><span class="params">acc</span> =&gt;</span> acc.username === user &amp;&amp; acc.admin))&#123;</div><div class="line">    <span class="comment">// admin이면 통과!</span></div><div class="line">    next();</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    res.status(<span class="number">403</span>);</div><div class="line">    res.send(<span class="string">'403 Forbidden'</span>);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">app.get(<span class="string">'/secret'</span>, onlyAdminMiddleware, (req, res) =&gt; &#123;</div><div class="line">  res.send(<span class="string">'It is my secret'</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
</section>
    <!-- Tags START -->
    
      <div class="tags">
        <span>Tags:</span>
        
  <a href="/tags#session" >
    <span class="tag-code">session</span>
  </a>

      </div>
    
    <!-- QR code START -->
    <div class="qrcode">
      <canvas id="share-qrcode"></canvas>
      <p class="notice">QR코드를 스캔해서 공유하세요!</p>
    </div>
    <!-- QR code END -->
    
      <!-- Gitment START -->
      <div id="comments"></div>
      <!-- Gitment END -->
    
  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
    <aside class="catalog-container">
  <div class="toc-main">
    <strong class="toc-title">Catalog</strong>
    
      <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#세션-Session"><span class="toc-nav-text">세션 Session</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#세션의-의미"><span class="toc-nav-text">세션의 의미</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#세션의-예"><span class="toc-nav-text">세션의 예</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#웹-서비스를-위한-세션의-구현"><span class="toc-nav-text">웹 서비스를 위한 세션의 구현</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#세션-스토어"><span class="toc-nav-text">세션 스토어</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#세션-스토어의-선택"><span class="toc-nav-text">세션 스토어의 선택</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#세션-세션-스토어"><span class="toc-nav-text">세션? 세션 스토어?</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Express-Session"><span class="toc-nav-text">Express + Session</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#익스프레스-세션-예제"><span class="toc-nav-text">익스프레스 세션 예제</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#인증-인가-예제"><span class="toc-nav-text">인증/인가 예제</span></a></li></ol></li></ol>
    
  </div>
</aside>
  
  <!-- Catalog END -->
</main>

<script>
  (function () {
    var url = 'http://huusz.github.io/2017/Nodejs/nodejs/09.session/';
    var banner = ''
    if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }
    $('.header').removeClass('fixed-header')

     // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', 'http://file.muyutech.com/error-img.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== 'http://file.muyutech.com/error-img.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()
        
        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })

    // qrcode
    var qr = new QRious({
      element: document.getElementById('share-qrcode'),
      value: document.location.href
    });

    // gitment
    var gitmentConfig = "huusz";
    if (gitmentConfig !== 'undefined') {
      var gitment = new Gitment({
        id: "[node]  세션 Session",
        owner: "huusz",
        repo: "huusz.github.io",
        oauth: {
          client_id: "d3a0f59f7ed9d7912d34",
          client_secret: "1e6eda5594a1d8399f6da40da0582ba24fc74bb3"
        },
        theme: {
          render(state, instance) {
            const container = document.createElement('div')
            container.lang = "en-US"
            container.className = 'gitment-container gitment-root-container'
            container.appendChild(instance.renderHeader(state, instance))
            container.appendChild(instance.renderEditor(state, instance))
            container.appendChild(instance.renderComments(state, instance))
            container.appendChild(instance.renderFooter(state, instance))
            return container;
          }
        }
      })
      gitment.render(document.getElementById('comments'))
    }
  })();
</script>

    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
  <p class="copyright">
    &copy; 2017 | Proudly powered by <a href="https://hexo.io" target="_blank">Hexo</a>
    <br>
    Theme by <a href="https://github.com/yanm1ng">yanm1ng</a>
  </p>
</footer>

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<script>
  async("//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);
  })
</script>

<script>
  var hasLine = 'true';
  async("//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js", function(){
    $('figure pre').each(function(i, block) {
      var figure = $(this).parents('figure');
      if (hasLine === 'false') {
        figure.find('.gutter').hide();
      }
      var lang = figure.attr('class').split(' ')[1] || 'code';
      var codeHtml = $(this).html();
      var codeTag = document.createElement('code');
      codeTag.className = lang;
      codeTag.innerHTML = codeHtml;
      $(this).attr('class', '').empty().html(codeTag);
      figure.attr('data-lang', lang.toUpperCase());
      hljs.highlightBlock(block);
    });
  })
</script>
<!-- Baidu Tongji -->

<script src="/js/script.js"></script>
  </body>
</html>